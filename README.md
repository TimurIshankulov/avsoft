# AVSoft
## Тестовое задание AVSoft
### Установка

1) Клонировать репозиторий:
```
git clone https://github.com/TimurIshankulov/avsoft.git
cd avsoft
```
2) Скопировать конфигурационные шаблоны в следующие файлы:
```
cp config_template.py config.py
cp docker-base_template.yml docker-base.yml
```
3) Отредактировать конфигурационный файл **docker-base.yml**, указать все параметры серверов, портов, пользователей и паролей, путей. Дополнительно можно указать после скольки повторений слова будет выгружаться файл — переменная **N_TIMES**.
4) Загрузить образы docker:
```
sudo docker pull mysql:8.0
sudo docker pull rabbitmq:3.10-management
sudo docker pull python:3.10-bullseye
```

### Запуск

Запустить команду docker-compose:
```
sudo docker-compose up -d
```
После этого можно складывать файлы в папку data/, они будут автоматически обработаны. Файлы с расширением .txt будут обрабатываться парсером, извлекая все слова из файла, разделяя по небуквенным символам; файлы с другими расширениями будут обрабатываться error-handler'ом и отправляться уведомления на почту, указанную в конфигурационном файле **docker-base.yml**.

При количестве встреченных слов, больше, чем **N_TIMES** из конфигурационного файла **docker-base.yml**, запись в БД будет удаляться, а в папке output/ появится файл с двумя строками — само слово и список файлов, где это слово встречается.
